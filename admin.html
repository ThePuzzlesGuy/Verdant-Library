<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Library Admin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="admin.css" />
</head>
<body>
  <header class="topbar">
    <h1>Library Admin</h1>
    <div class="actions">
      <button id="exportJson" class="primary">Export Updated JSON</button>
      <label class="file">
        <input type="file" id="importJson" accept=".json" />
        Import JSON
      </label>
    </div>
  </header>

  <section class="controls">
    <input id="search" type="search" placeholder="Search title, author, series, genre…" />
    <div class="counts">
      <span id="countShown">0</span> shown
      <span class="dim">/ <span id="countTotal">0</span> total</span>
    </div>
    <div class="viewopts">
      <label><input type="checkbox" id="onlyMissingCovers" /> Only items with missing/failed covers</label>
    </div>
  </section>

  <main id="grid" class="grid" aria-live="polite"></main>

  <template id="cardTpl">
    <article class="card">
      <div class="coverWrap">
        <img class="cover" alt="Cover" />
        <div class="coverBadge hidden" title="Tried fallbacks">F</div>
      </div>
      <div class="meta">
        <label>Title <input class="fld title"></label>
        <label>Author <input class="fld author"></label>
        <label>Series <input class="fld series"></label>
        <label>Main Genre <input class="fld main_genre"></label>
        <label>Sub-Genre <input class="fld sub_genre"></label>
        <label>Read Status <input class="fld read_status"></label>
        <label>Rating <input class="fld rating" placeholder="⭐️⭐️⭐️" /></label>
        <label>ISBN <input class="fld isbn" placeholder="optional for Open Library fallback" /></label>
        <label>Cover URL / Filename
          <input class="fld cover_raw" placeholder="e.g. covers/my-book.jpg or https://…" />
        </label>
        <details class="adv">
          <summary>Advanced (IDs/Notes)</summary>
          <label>ID <input class="fld id"></label>
          <label>Notes <textarea class="fld notes" rows="2"></textarea></label>
        </details>
      </div>
      <div class="rowActions">
        <button class="btn save">Save</button>
        <button class="btn reset">Reset</button>
        <button class="btn testCover">Test Cover</button>
      </div>
    </article>
  </template>

  <script src="admin.js" type="module"></script>
</body>
</html>
